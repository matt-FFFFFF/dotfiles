#!/bin/sh

#
# arm-client-secret
#
# Gets the above secret from Azure key vault. Needs TFKEYVAULT set by local env file.

COMMANDS="az"
 
for COMMAND in $COMMANDS; do
  if [ ! $(command -v $COMMAND) ]; then
    fail "Could not find '$COMMAND' command. Is it installed?"
  fi
done

az keyvault secret show --vault-name $TFKEYVAULT --name azurerm-client-secret --query value --output tsv
